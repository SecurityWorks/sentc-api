base_mw: "middleware"
handler_404: crate::not_found_handler
prefix: "/api"
routes:
  # api v1 routes
  - group:
      p: "/v1"
      gr:
        #_______________________________________________________________________________________________________________
        # routes don't need jwt check
        - group:
            p: ""
            gr:
              - post: {p: "/exists", s: crate::user::exists}
              - post: {p: "/register", s: crate::user::register}
              - post: {p: "/prepare_login", s: crate::user::prepare_login}
              - post: {p: "/done_login", s: crate::user::done_login}
        #_______________________________________________________________________________________________________________
        # routes which needed jwt check with a valid jwt
        - group:
            p: ""
            mw:
              - jwt::jwt_transform
            gr:
              #_________________________________________________________________________________________________________
              # user routes in the user mod
              - group:
                  p: "/user"
                  gr:
                    - get: {p: "", s: crate::user::get}
              #_________________________________________________________________________________________________________
              # group routes in the group mod
              - group:
                  p: "/group"
                  gr:
                    - get: {p: "/:id", s: crate::group::get}